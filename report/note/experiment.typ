#import "imports.typ":*

= Sub-Milliohm Resistance Measurement
In this experiment, we aim to measure the sub-milliohm resistance of a copper wire using an SR830 Lock-in Amplifier, using the four-probe method to minimize contact resistance effects. This experiment was proposed in its two probe configuration in @Libbrecht2003. We extend this to a four-probe configuration for better accuracy.

== Procedure
1. Connect the copper wire sample in a four-probe configuration to the SR830 Lock-in Amplifier.
2. Our lock-in amplifier's was inconsistent in using an external current source using `REF IN`. It failed to use the external trigger of the signal generator. So we shall, instead use the signal generated by the `SINE OUT` of the lock-in amplifier itself to drive current through the sample.
3. The circuit used in given below in @circuit, using voltage divider, we obtain the resistance of the wire $R_w$.
4. We set the amplitude of the lock-in amplifier to some reference value, say 2.5 V for our case.
5. We set the time constant of the lock-in amplifier and the sensitivity appropriately to get a stable reading.
6. We `AUTO PHASE` and `AUTO GAIN` the lock-in amplifier to optimize the phase and gain settings, such that the gain does
7. We record the measurements using a GPIB cable and python scripts using the `pyvisa` library.
8. We vary the frequency of the lock-in amplifier from 10 Hz to 100 kHz, and record the voltage across the inner probes.
9. For each frequency, after setting the frequency, we wait for several time constants and then record the voltage reading and the voltage fluctuations.
10. The Plots are then taken and analyzed.



== Circuit Diagram
#figure(
  image("Attachments/Circuit(2).png", width:50%),
  caption: "Circuit diagram for four-probe resistance measurement using SR830 Lock-in Amplifier."
)<circuit>
The Four probe configuration uses the `SINE OUT` of the lock-in amplifier to drive current through the outer probes A and D. The voltage across the inner probes B and C is measured using the differential input of the lock-in amplifier. We now infer wire resistance $R_w$ using the voltage divider formula. The current $I$ through the wire is given by:
$
  I = (V_A - V_C)/(R_0 + R_w) = (V_B - V_C)/R_w
$
Also note that $V_C = 0$, since it is the ground reference for the lock-in amplifier.
Using this, we can derive the expression for $R_w$ as:
$
  & (V_A - V_C)/(R_0 + R_w) = (V_B - V_C)/R_w \
  ==> &R_w  = V_B /V_A  R_0 / (1 +  R_w/R_0) \
  ==> & R_w  approx V_B /V_A  R_0  ("since" R_w << R_0)
$
For our experiment, we choose $R_0 = 1 k H z$, which is much larger than the expected resistance of the copper wire, which is in the sub-milliohm range. This approximation is correct upto and order of $10^(-6) Omega$.

== Parameters
The parameters used in the experiment are tabulated below:
1. Reference Voltage Amplitude: 2.5 V
2. Reference Frequency: 10 Hz to 100 kHz (varied)
3. Series Resistor $R_0$: $1 k Omega$
4. Time Constant: 1 s
5. Roll off: 24 dB/oct

== Analysis

The recorded voltage across the inner probes is used to calculate the resistance of the copper wire using the derived formula. The resistance values are plotted against the frequency to observe any frequency dependence. We collected 4 datasets. Note that we have plotted the voltages of $R, X,Y$ from with the frequency in the log scale.
#figure(
  image("assets/Res_vs_freq_data604.png", width:70%),
  caption: "Voltage vs Frequency plot."
)
#figure(
  image("assets/Res_vs_freq_data987.png", width:70%),
  caption: "Voltage vs Frequency plot."
)

#figure(
  image("assets/Res_vs_freq_data561.png", width:70%),
  caption: "Voltage vs Frequency plot."
)
#figure(
  image("assets/Res_vs_freq_data388.png", width:70%),
  caption: "Voltage vs Frequency plot."
)
== Resistance
From our datasets we take a weighed mean of the resistance values calculated from the voltage measurements in the domain of low error in around the 100 Hz range. The weighed mean resistance value is given by:
$
  R_w = (sum_(i) sigma_R^(-2) R_i)/(sum_(i) sigma_R^(-2))
$
The error in the resistance is given by:
$
  sigma_(R_w) = sqrt(sum_i sigma_R^2)
$
The resistance value of the copper wire is given as,
$
  R_w = 0.27 plus.minus 0.071 m Omega
$
Using the X component of the voltage, we get a similar value of resistance,
$
  R_w^X = 0.23 plus.minus 0.087 m Omega
$

== Errors
The voltage plots have been calculated with error bars, which are derived from the voltage fluctuations recorded during the experiment. The error bars have been scaled by a factor of 100 for better visibility in the plots.

#figure(
  image("assets/Res_vs_Freq_with_Error_Bars_dat604.png", width:70%),
  caption: "Voltage vs Frequency plot with errorbars."
)
#figure(
  image("assets/Res_vs_Freq_with_Error_Bars_dat987.png", width:70%),
  caption: "Voltage vs Frequency plot with errorbars."
)
#figure(
  image("assets/Res_vs_Freq_with_Error_Bars_dat561.png", width:70%),
  caption: "Voltage vs Frequency plot with errorbars."
)
#figure(
  image("assets/Res_vs_Freq_with_Error_Bars_dat388.png", width:70%),
  caption: "Voltage vs Frequency plot with errorbars."
)
== Observations
The resistance values calculated from the voltage measurements are in the sub-milliohm range, as expected for a copper wire. Nevertheless there are some features of the graphs that are interesting.


#figure(
  image("assets/Res_vs_Freq_with_Error_Bars_dat386.png", width:70%),
  caption: "Voltage vs Frequency plot with errorbars."
)

Consider the graph above. At the 50 Hz frequency, we see a spike in voltage, along with a spike in voltage fluctuations. This is likely due to the power line interference at 50 Hz, since AC power lines operate at this frequency. The interference can introduce noise into the measurements, leading to increased voltage readings and fluctuations.


A much more interesting feature is the dip in voltage at around 10 kHz. This feature is present in all the datasets, albeit at slightly different frequencies. We name this unexpected effect "The Bermuda Bandwidth". This effect is unexpected, and we do not have a clear explanation for it. The dips can oberved in all voltage components $R, X, Y, theta$.
#figure(
  image("assets/TheBermudaBandwith_R.png", width:70%),
  caption: "Voltage vs Frequency plot showing the dip."
)

#figure(
  image("assets/TheBermudaBandwith_X.png", width:70%),
  caption: "Voltage vs Frequency plot showing the dip."
)
#figure(
  image("assets/TheBermudaBandwith_Y.png", width:70%),
  caption: "Voltage vs Frequency plot showing the dip."
)
The effect is however most pronounced in the phase angle theta plot.
#figure(
  image("assets/TheBermudaBandwith_theta.png", width:70%),
  caption: "Voltage vs Frequency plot showing the dip."

)

At higher frequencies, above 10 kHz, the resistances blow up. This is likely due to the skin effect on conductors. As frequency increases, the alternating current creates a magnetic field that induces eddy currents within the conductor. These eddy currents are stronger near the center of the conductor and thus allow currents only on the surface of the conductor. This effectively reduces the cross-sectional area available for current flow, leading to an increase in resistance. 

== Sources of Error
The main sources of error in this experiment have been listed above in the theory section. Some other sources of error for this experiment are:
1. Capacitance and Inductance effects: At higher frequencies, the capacitance and inductance of the wires and contacts can introduce additional impedance, affecting the voltage measurements.
2. The Lock-in used by us had an inconsistent behaviour when using an external current source. This led us to use the internal signal generator of the lock-in itself, which may have introduced additional errors.
3. The BNC cable connection to the Lockin amplifier may have introduced additional noise and errors in the measurements.
4. Frequency measurements done near $50H z$ harmonics may have been affected by power line interference. We have seen an example of that in our data.



== Conclusion
In this experiment, we successfully measured the sub-milliohm resistance of a copper wire using a four-probe configuration with an SR830 Lock-in Amplifier. The results indicate that the resistance values are in the expected range.


One hint about the next part of our report can be gleaned from the fact that the errorbars are larger in the lower frequency domain, which leads to our next section on $1/f$ noise analysis.
